{% extends "base.html" %}
{% block content %}

<style>

/* ===== Hero Section ===== */

.hero {
  text-align: center;
  margin: 30px 0 40px;
}

.hero-block {
  text-align:center;
  margin-top: 20px;
  margin-bottom: 30px;
}

.hero-title {
  font-size: 88px;
  font-family: cursive;
  margin: 0;
}

.hero-sub {
  font-size: 18px;
  opacity: .8;
  max-width: 900px;
  margin: 10px auto 0;
}

/* fade system */

.fade-on-view {
  opacity: 0;
  transform: translateY(30px);
  transition: all .8s ease;
  /* transition: opacity 1s ease, transform 1s cubic-bezier(.16,1,.3,1); */

}

.fade-on-view.visible {
  opacity: 1;
  transform: translateY(0);
}





.hero-sub {
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
  font-size: 16px;
  opacity: .75;
  max-width: 780px;
  margin: 0 auto;
}

.filter-bar {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px,1fr));
  gap: 12px;
  background: white;
  padding: 18px;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(0,0,0,.06);
  margin-bottom: 24px;
}

.filter-bar input,
.filter-bar select {
  padding: 10px;
  border-radius: 10px;
  border: 1px solid #d1d5db;
  font-size: 14px;
}

.btn-secondary {
  display: inline-block;
  padding: 10px 16px;
  border-radius: 12px;
  text-decoration: none;
  text-align: center;
  font-weight: 600;
  background: #e2e8f0;
  color: #0f172a;
  transition: .2s;
}

.btn-secondary:hover {
  background: #cbd5e1;
}

/* ===== Grid ===== */

.pg-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 22px;
  margin-top: 30px;
}

/* ===== Card Upgrade ===== */

.pg-card {
  background: white;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 10px 28px rgba(0,0,0,.08);
  transition: .25s;
}

.pg-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 40px rgba(0,0,0,.12);
}

.pg-img {
  width: 100%;
  height: 220px;
  object-fit: cover;
}

.pg-body {
  padding: 16px 18px 20px;
}

.pg-name {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 6px;
}

.pg-meta {
  font-size: 14px;
  opacity: .75;
  margin-bottom: 8px;
}

.pg-rent {
  font-weight: 700;
  margin-bottom: 6px;
}

.pg-rating {
  margin-bottom: 12px;
}

/* ===== Button ===== */

.btn-view {
  display: inline-block;
  padding: 10px 16px;
  background: #1f3a8a;
  color: white;
  border-radius: 12px;
  text-decoration: none;
  font-weight: 600;
  cursor: pointer;
  border: 1px solid black;
}

.btn-view:hover {
  opacity: 0.8;
}

/* ===== PARALLAX HERO ===== */

.hero-parallax {
  height: 60vh;
  background-image: url("/media/pg_images/upscaleBackgroundimg.jpg"); /* change image */
  background-size: cover;
  border-radius: 20px;
  background-position: center;
  background-attachment: fixed;   /* ⭐ magic line */
  display: flex;
  align-items: center;
  padding-left: 8%;
  margin-bottom: 40px;
  margin-top: 20px;
}

/* dark card */

.hero-overlay-card {
  background: rgba(0,0,0,0.88);
  color: white;
  max-width: 520px;
  padding: 36px;
  border-radius: 18px;
  box-shadow: 0 20px 60px rgba(0,0,0,.4);
}

.hero-label {
  font-size: 12px;
  letter-spacing: 2px;
  opacity: .7;
  margin-bottom: 14px;
}

.hero-overlay-card h2 {
  font-size: 34px;
  margin: 0 0 16px;
  line-height: 1.25;
}

.hero-overlay-card p {
  opacity: .85;
  line-height: 1.6;
  margin-bottom: 22px;
}

/* button */

.hero-btn {
  display: inline-block;
  padding: 12px 18px;
  border-radius: 10px;
  border: 1px solid white;
  color: white;
  text-decoration: none;
  font-weight: 600;
  transition: .2s;
}

.hero-btn:hover {
  background: white;
  color: black;
}


</style>

<!-- ================= HERO ================= -->

<div class="hero-block ">

  <h1 class="hero-title fade-on-view" id="formbar">
    Welcome To Nestora
  </h1>

  <p class="hero-sub">
    Your trusted platform for finding the perfect PG accommodations.
    Treat your home away from home with our curated selection of premium PGs.
  </p>

</div>

<form method="get" class="filter-bar">

  <!-- SEARCH -->
  <input type="text" name="q"
         placeholder="Search by name, city, area..."
         value="{{ request.GET.q }}">

  <!-- PRICE -->
  <input type="number" name="min_price"
         placeholder="Min Rent">

  <input type="number" name="max_price"
         placeholder="Max Rent">

  <!-- AVAILABILITY -->
  <select name="availability">
    <option value="">Availability</option>
    <option value="immediate">Immediate</option>
    <option value="15">Within 15 Days</option>
    <option value="30">Within 30 Days</option>
    <option value="later">After 30 Days</option>
  </select>

  <!-- TENANT -->
  <select name="tenant">
    <option value="">Tenant Type</option>
    <option value="family">Family</option>
    <option value="bachelor_male">Bachelor Male</option>
    <option value="bachelor_female">Bachelor Female</option>
    <option value="company">Company</option>
  </select>

  <button type="submit" class="btn-view">Apply</button>

  <a href="{% url 'pg_list' %}" class="btn-secondary">Reset</a>

</form>


<!-- ================= GRID ================= -->

<div class="pg-grid" id="pg-list">

{% for pg in pgs %}
  <div class="pg-card">

    {% if pg.image %}
      <img src="{{ pg.image.url }}" class="pg-img">
    {% endif %}

    <div class="pg-body">

      <div class="pg-name">{{ pg.name }}</div>

      <div class="pg-meta">
        {{ pg.city }} — {{ pg.area }}
      </div>

      <div class="pg-rent">₹ {{ pg.monthly_rent }}</div>

      <div class="pg-rating">
        ⭐ {{ pg.average_rating }}
      </div>

      <a href="{% url 'pg_detail' pg.id %}" class="btn-view">
        View Details
      </a>

    </div>
  </div>

{% empty %}
  <p>No PGs listed yet.</p>
{% endfor %}

</div>

  <!-- ===== HERO PARALLAX ===== -->
<section class="hero-parallax">

  <div class="hero-overlay-card">

    <div class="hero-label">WHY NESTORA</div>

    <h2>
      A smarter way to find <br>
      your perfect PG stay
    </h2>

    <p>
      Discover verified PG accommodations with real reviews,
      transparent pricing, food options, and image galleries —
      all in one place.
    </p>

    <a href="#formbar" class="hero-btn">
      Browse PGs →
    </a>

  </div>

</section>


<script>

const observer = new IntersectionObserver((entries)=>{
  entries.forEach(entry=>{
    if(entry.isIntersecting){
      entry.target.classList.add("visible");
    } else {
      entry.target.classList.remove("visible"); // fade again when scrolling back
    }
  });
},{
  threshold: 0.35
});

document.querySelectorAll(".fade-on-view")
  .forEach(el => observer.observe(el));

</script>


{% endblock %}
